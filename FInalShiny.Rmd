---
title: "Pokemon Tournament Analysis"
author: "Jackson Marsh and Mario Rodriguez"
date: "2024-12-11"
output: html_document
runtime: shiny
---

```{r}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(stringr)
library(rvest)
library(httr)
library(ggplot2)
library(readr)
library(plotly)
library(flexdashboard)
library(ggthemes)
library(shinyWidgets)
library(reshape2)
library(gt)
```

```{r}
national_dex <- read_csv("Data/national_dex.csv")
tournament_results <- read_csv("Data/tournament_results.csv")
TypeChart <- read_csv("~/TypeChart.csv")
```


```{r}
tournament_results <- tournament_results %>%
  mutate(pokemon = str_extract(pokemon, "\\d\\d(\\d)?(\\d)?"), 
         pokemon = parse_number(pokemon))
```

```{r}
tournament_results$pokemon <- as.character(tournament_results$pokemon)
national_dex$pokemon <- as.character(national_dex$pokemon)
```


```{r}
fulldata <- tournament_results %>%
  left_join(national_dex)
```

```{r eruptions, echo=FALSE}
inputPanel(
  selectInput("stat", label = "Key Statistic:",
              choices = c("Health points" ="hp","Attack" = "attack","Defense" = "defense", "Special Attack" = "sp_atk","Special Defense" = "sp_def","Speed" = "speed"), selected = "hp")
)

renderPlot({   
  fulldata %>% 
  group_by(player) %>%
  mutate(sum = sum(input$stat)) %>%
  slice_head() %>%
  select(player, sum) %>%
   plot_ly(x = ~player, y = ~.data[[input$stat]], type = 'bar', color = ~ player, height = 440) %>%
      layout(xaxis = list(title = "Player"),
             yaxis = list(title = if (input$y == "hp")
                                     "Health Points"
                                  else if (input$y == "attack")
                                     "Attack"
                                  else if (input$y == "defense")
                                     "Defense"
                                  else if (input$y == "sp_atk")
                                     "Special Attack"
                                  else if (input$y == "sp_def")
                                     "Special Defense"
                                  else if (input$y == "speed")
                                     "Speed"
                                  ), title = "Key stats total of ")
})
```

```{r}

```

