---
title: "Pokemon Tournament Analysis"
author: "Jackson Marsh and Mario Rodriguez"
date: "2024-12-11"
runtime: shiny
output: 
  flexdashboard::flex_dashboard:
      theme: yeti
---

```{r}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(readr)
library(stringr)
library(rvest)
library(httr)
library(ggplot2)
library(readr)
library(plotly)
library(flexdashboard)
library(ggthemes)
library(shinyWidgets)
library(reshape2)
library(gt)
```

```{r}
national_dex <- read_csv("Data/national_dex_raw.csv")
tournament_results <- read_csv("Data/tournament_results_raw.csv")
TypeChart <- read_csv("~/TypeChart.csv")
```


```{r}
tournament_results <- tournament_results %>%
  mutate(pokemon = str_extract(pokemon, "\\d\\d(\\d)?(\\d)?"), 
         pokemon = parse_number(pokemon))
```

```{r}
tournament_results$pokemon <- as.character(tournament_results$pokemon)
national_dex$pokemon <- as.character(national_dex$pokemon)
```


```{r}
fulldata <- tournament_results %>%
  left_join(national_dex)
```

Pokemon Team Stats
==========================

Row 
-------------------------

```{r, echo=FALSE}
inputPanel(
  selectInput("y", label = "Key Statistic:",
              choices = c("Health points" = "hp","Attack" = "attack","Defense" = "defense", "Special Attack" = "sp_atk","Special Defense" = "sp_def","Speed" = "speed"))
)
```

Row 
-------------------------

```{r, echo=FALSE}
renderPlot({  
  
  value <- national_dex %>%
    mean(hp)
  
fulldata %>%
  group_by(player) %>%
  mutate(sum = sum(hp)) %>%
  slice_head() %>%
  select(player, sum) %>%
  ggplot(aes(x = player, y = sum)) +
  geom_col() + 
  geom_hline(yintercept = value * 6, color = "red") + 
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
})
```


